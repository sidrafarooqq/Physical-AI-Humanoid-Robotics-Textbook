"use strict";(globalThis.webpackChunkphysical_ai_humanoid_robotics_textbook=globalThis.webpackChunkphysical_ai_humanoid_robotics_textbook||[]).push([[144],{7965:(r,n,e)=>{e.r(n),e.d(n,{assets:()=>l,contentTitle:()=>t,default:()=>m,frontMatter:()=>a,metadata:()=>i,toc:()=>c});const i=JSON.parse('{"id":"Module-1-The Robotic-Nervous-System/chapter4","title":"Chapter 4: Humanoid Modeling with URDF and Xacro","description":"From Concepts to Robot Models","source":"@site/docs/Module-1-The Robotic-Nervous-System/chapter4.md","sourceDirName":"Module-1-The Robotic-Nervous-System","slug":"/Module-1-The Robotic-Nervous-System/chapter4","permalink":"/docs/Module-1-The Robotic-Nervous-System/chapter4","draft":false,"unlisted":false,"editUrl":"https://github.com/<your-username>/<your-repo>/tree/main/docs/Module-1-The Robotic-Nervous-System/chapter4.md","tags":[],"version":"current","frontMatter":{},"sidebar":"tutorialSidebar","previous":{"title":"Chapter 3: Implementing Your First ROS 2 System","permalink":"/docs/Module-1-The Robotic-Nervous-System/chapter3"},"next":{"title":"Chapter 1: Physics Simulation Fundamentals in Gazebo","permalink":"/docs/Module-2-The-Digital-Twin-Gazebo-&-Unity/chapter1"}}');var o=e(4848),s=e(8453);const a={},t="Chapter 4: Humanoid Modeling with URDF and Xacro",l={},c=[{value:"From Concepts to Robot Models",id:"from-concepts-to-robot-models",level:2},{value:"Understanding URDF Fundamentals",id:"understanding-urdf-fundamentals",level:3},{value:"Xacro: Making URDF Modular",id:"xacro-making-urdf-modular",level:3},{value:"A 12-DoF Humanoid Model",id:"a-12-dof-humanoid-model",level:3},{value:"Visualization in RViz2",id:"visualization-in-rviz2",level:3},{value:"Summary: Your Robotic Nervous System is Ready",id:"summary-your-robotic-nervous-system-is-ready",level:2},{value:"Quick Reference: Common ROS 2 Commands",id:"quick-reference-common-ros-2-commands",level:2},{value:"Further Reading &amp; Resources",id:"further-reading--resources",level:2}];function d(r){const n={a:"a",code:"code",h1:"h1",h2:"h2",h3:"h3",header:"header",hr:"hr",li:"li",p:"p",pre:"pre",strong:"strong",ul:"ul",...(0,s.R)(),...r.components};return(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)(n.header,{children:(0,o.jsx)(n.h1,{id:"chapter-4-humanoid-modeling-with-urdf-and-xacro",children:"Chapter 4: Humanoid Modeling with URDF and Xacro"})}),"\n",(0,o.jsx)(n.h2,{id:"from-concepts-to-robot-models",children:"From Concepts to Robot Models"}),"\n",(0,o.jsx)(n.p,{children:"A humanoid robot is defined by its kinematic structure\u2014where joints are, what they can do, and how links (rigid bodies) connect. URDF (Unified Robot Description Format) is the XML-based standard for defining this structure in ROS 2."}),"\n",(0,o.jsx)(n.h3,{id:"understanding-urdf-fundamentals",children:"Understanding URDF Fundamentals"}),"\n",(0,o.jsx)(n.p,{children:"URDF documents contain:"}),"\n",(0,o.jsxs)(n.ul,{children:["\n",(0,o.jsxs)(n.li,{children:[(0,o.jsx)(n.strong,{children:"Links"}),": Rigid bodies with visual geometry and collision properties"]}),"\n",(0,o.jsxs)(n.li,{children:[(0,o.jsx)(n.strong,{children:"Joints"}),": Connections between links with motion constraints"]}),"\n",(0,o.jsxs)(n.li,{children:[(0,o.jsx)(n.strong,{children:"Transmissions"}),": Mappings between joints and actuators"]}),"\n",(0,o.jsxs)(n.li,{children:[(0,o.jsx)(n.strong,{children:"Materials"}),": Visual appearance properties"]}),"\n"]}),"\n",(0,o.jsx)(n.h3,{id:"xacro-making-urdf-modular",children:"Xacro: Making URDF Modular"}),"\n",(0,o.jsxs)(n.p,{children:[(0,o.jsx)(n.strong,{children:"Xacro"})," (XML Macros) extends URDF with programming constructs: variables, macros, conditional logic. This dramatically reduces redundancy in complex models."]}),"\n",(0,o.jsx)(n.pre,{children:(0,o.jsx)(n.code,{className:"language-xml",children:'<xacro:property name="M_PI" value="3.14159265" />\r\n<xacro:macro name="arm_segment" params="name length mass">\r\n  \x3c!-- Reusable arm segment definition --\x3e\r\n</xacro:macro>\n'})}),"\n",(0,o.jsx)(n.h3,{id:"a-12-dof-humanoid-model",children:"A 12-DoF Humanoid Model"}),"\n",(0,o.jsxs)(n.p,{children:["Create ",(0,o.jsx)(n.code,{children:"urdf/humanoid_12dof.urdf.xacro"}),":"]}),"\n",(0,o.jsx)(n.pre,{children:(0,o.jsx)(n.code,{className:"language-xml",children:'<?xml version="1.0"?>\r\n<robot xmlns:xacro="http://www.ros.org/wiki/xacro" name="humanoid_12dof">\r\n\r\n  <xacro:property name="M_PI" value="3.14159265" />\r\n  <xacro:property name="BASE_MASS" value="5.0" />\r\n  <xacro:property name="ARM_MASS" value="1.0" />\r\n  <xacro:property name="LEG_MASS" value="2.5" />\r\n\r\n  <xacro:macro name="default_inertial" params="mass">\r\n    <inertial>\r\n      <mass value="${mass}" />\r\n      <inertia ixx="0.001" ixy="0.0" ixz="0.0" \r\n               iyy="0.001" iyz="0.0" izz="0.001" />\r\n    </inertial>\r\n  </xacro:macro>\r\n\r\n  \x3c!-- Base/Pelvis --\x3e\r\n  <link name="base_link">\r\n    <visual>\r\n      <geometry><box size="0.2 0.2 0.3"/></geometry>\r\n      <material name="blue"><color rgba="0 0 1 1"/></material>\r\n    </visual>\r\n    <collision>\r\n      <geometry><box size="0.2 0.2 0.3"/></geometry>\r\n    </collision>\r\n    <xacro:default_inertial mass="${BASE_MASS}"/>\r\n  </link>\r\n\r\n  \x3c!-- Torso --\x3e\r\n  <joint name="torso_joint" type="fixed">\r\n    <parent link="base_link"/>\r\n    <child link="torso_link"/>\r\n    <origin xyz="0 0 0.15" rpy="0 0 0"/>\r\n  </joint>\r\n  <link name="torso_link">\r\n    <visual>\r\n      <geometry><box size="0.25 0.18 0.35"/></geometry>\r\n      <material name="red"><color rgba="1 0 0 1"/></material>\r\n    </visual>\r\n    <collision>\r\n      <geometry><box size="0.25 0.18 0.35"/></geometry>\r\n    </collision>\r\n    <xacro:default_inertial mass="10.0"/>\r\n  </link>\r\n\r\n  \x3c!-- ARM MACRO --\x3e\r\n  <xacro:macro name="arm" params="side pos_y">\r\n    \x3c!-- Shoulder Joint --\x3e\r\n    <joint name="${side}_shoulder_pitch" type="revolute">\r\n      <parent link="torso_link"/>\r\n      <child link="${side}_shoulder_link"/>\r\n      <origin xyz="0 ${pos_y} 0.1" rpy="0 0 0"/>\r\n      <axis xyz="1 0 0"/>\r\n      <limit lower="${-M_PI/2}" upper="${M_PI/2}" effort="100" velocity="1.57"/>\r\n    </joint>\r\n    <link name="${side}_shoulder_link">\r\n      <visual>\r\n        <geometry><cylinder radius="0.05" length="0.1"/></geometry>\r\n        <material name="green"><color rgba="0 1 0 1"/></material>\r\n      </visual>\r\n      <collision>\r\n        <geometry><cylinder radius="0.05" length="0.1"/></geometry>\r\n      </collision>\r\n      <xacro:default_inertial mass="${ARM_MASS}"/>\r\n    </link>\r\n\r\n    \x3c!-- Elbow Joint --\x3e\r\n    <joint name="${side}_elbow_pitch" type="revolute">\r\n      <parent link="${side}_shoulder_link"/>\r\n      <child link="${side}_forearm_link"/>\r\n      <origin xyz="0.15 0 0" rpy="0 0 0"/>\r\n      <axis xyz="1 0 0"/>\r\n      <limit lower="0" upper="${M_PI}" effort="100" velocity="1.57"/>\r\n    </joint>\r\n    <link name="${side}_forearm_link">\r\n      <visual>\r\n        <geometry><cylinder radius="0.04" length="0.15"/></geometry>\r\n        <material name="yellow"><color rgba="1 1 0 1"/></material>\r\n      </visual>\r\n      <collision>\r\n        <geometry><cylinder radius="0.04" length="0.15"/></geometry>\r\n      </collision>\r\n      <xacro:default_inertial mass="${ARM_MASS * 0.8}"/>\r\n    </link>\r\n\r\n    \x3c!-- Wrist Joint --\x3e\r\n    <joint name="${side}_wrist_pitch" type="revolute">\r\n      <parent link="${side}_forearm_link"/>\r\n      <child link="${side}_hand_link"/>\r\n      <origin xyz="0.15 0 0" rpy="0 0 0"/>\r\n      <axis xyz="1 0 0"/>\r\n      <limit lower="${-M_PI/4}" upper="${M_PI/4}" effort="50" velocity="2.0"/>\r\n    </joint>\r\n    <link name="${side}_hand_link">\r\n      <visual>\r\n        <geometry><box size="0.08 0.1 0.08"/></geometry>\r\n        <material name="white"><color rgba="1 1 1 1"/></material>\r\n      </visual>\r\n      <collision>\r\n        <geometry><box size="0.08 0.1 0.08"/></geometry>\r\n      </collision>\r\n      <xacro:default_inertial mass="0.3"/>\r\n    </link>\r\n  </xacro:macro>\r\n\r\n  \x3c!-- Instantiate both arms --\x3e\r\n  <xacro:arm side="right" pos_y="-0.12"/>\r\n  <xacro:arm side="left" pos_y="0.12"/>\r\n\r\n  \x3c!-- LEG MACRO --\x3e\r\n  <xacro:macro name="leg" params="side pos_y">\r\n    \x3c!-- Hip Joint --\x3e\r\n    <joint name="${side}_hip_pitch" type="revolute">\r\n      <parent link="base_link"/>\r\n      <child link="${side}_hip_link"/>\r\n      <origin xyz="0 ${pos_y} -0.15" rpy="0 0 0"/>\r\n      <axis xyz="1 0 0"/>\r\n      <limit lower="${-M_PI/4}" upper="${M_PI/4}" effort="150" velocity="1.57"/>\r\n    </joint>\r\n    <link name="${side}_hip_link">\r\n      <visual>\r\n        <geometry><box size="0.1 0.08 0.12"/></geometry>\r\n        <material name="orange"><color rgba="1 0.5 0 1"/></material>\r\n      </visual>\r\n      <collision>\r\n        <geometry><box size="0.1 0.08 0.12"/></geometry>\r\n      </collision>\r\n      <xacro:default_inertial mass="${LEG_MASS}"/>\r\n    </link>\r\n\r\n    \x3c!-- Knee Joint --\x3e\r\n    <joint name="${side}_knee_pitch" type="revolute">\r\n      <parent link="${side}_hip_link"/>\r\n      <child link="${side}_knee_link"/>\r\n      <origin xyz="0 0 -0.2" rpy="0 0 0"/>\r\n      <axis xyz="1 0 0"/>\r\n      <limit lower="0" upper="${M_PI/2}" effort="150" velocity="1.57"/>\r\n    </joint>\r\n    <link name="${side}_knee_link">\r\n      <visual>\r\n        <geometry><box size="0.1 0.08 0.2"/></geometry>\r\n        <material name="purple"><color rgba="0.5 0 0.5 1"/></material>\r\n      </visual>\r\n      <collision>\r\n        <geometry><box size="0.1 0.08 0.2"/></geometry>\r\n      </collision>\r\n      <xacro:default_inertial mass="${LEG_MASS}"/>\r\n    </link>\r\n  </xacro:macro>\r\n\r\n  \x3c!-- Instantiate both legs --\x3e\r\n  <xacro:leg side="right_leg" pos_y="-0.08"/>\r\n  <xacro:leg side="left_leg" pos_y="0.08"/>\r\n\r\n</robot>\n'})}),"\n",(0,o.jsx)(n.h3,{id:"visualization-in-rviz2",children:"Visualization in RViz2"}),"\n",(0,o.jsxs)(n.p,{children:["Create ",(0,o.jsx)(n.code,{children:"launch/display.launch.py"}),":"]}),"\n",(0,o.jsx)(n.pre,{children:(0,o.jsx)(n.code,{className:"language-python",children:"import os\r\nfrom ament_index_python.packages import get_package_share_directory\r\nfrom launch import LaunchDescription\r\nfrom launch.actions import DeclareLaunchArgument\r\nfrom launch.substitutions import Command, LaunchConfiguration\r\nfrom launch_ros.actions import Node\r\n\r\ndef generate_launch_description():\r\n    pkg_dir = get_package_share_directory('humanoid_controller')\r\n    urdf_path = os.path.join(pkg_dir, 'urdf', 'humanoid_12dof.urdf.xacro')\r\n    rviz_config = os.path.join(pkg_dir, 'rviz', 'default.rviz')\r\n\r\n    return LaunchDescription([\r\n        Node(\r\n            package='robot_state_publisher',\r\n            executable='robot_state_publisher',\r\n            parameters=[{'robot_description': Command(['xacro ', urdf_path])}]\r\n        ),\r\n        Node(\r\n            package='joint_state_publisher_gui',\r\n            executable='joint_state_publisher_gui',\r\n            name='joint_state_publisher_gui'\r\n        ),\r\n        Node(\r\n            package='rviz2',\r\n            executable='rviz2',\r\n            name='rviz2',\r\n            arguments=['-d', rviz_config]\r\n        ),\r\n    ])\n"})}),"\n",(0,o.jsx)(n.p,{children:"Launch and visualize:"}),"\n",(0,o.jsx)(n.pre,{children:(0,o.jsx)(n.code,{className:"language-bash",children:"cd ~/ros2_humanoid_ws\r\ncolcon build\r\nsource install/setup.bash\r\nros2 launch humanoid_controller display.launch.py\n"})}),"\n",(0,o.jsx)(n.p,{children:"You should now see your 12-DoF humanoid in RViz2, with interactive sliders to move each joint!"}),"\n",(0,o.jsx)(n.hr,{}),"\n",(0,o.jsx)(n.h2,{id:"summary-your-robotic-nervous-system-is-ready",children:"Summary: Your Robotic Nervous System is Ready"}),"\n",(0,o.jsx)(n.p,{children:"You've now mastered the foundational components of ROS 2:"}),"\n",(0,o.jsxs)(n.ul,{children:["\n",(0,o.jsxs)(n.li,{children:[(0,o.jsx)(n.strong,{children:"Architecture"}),": Peer-to-peer DDS-based communication for resilience and scalability"]}),"\n",(0,o.jsxs)(n.li,{children:[(0,o.jsx)(n.strong,{children:"Communication Primitives"}),": Topics for streams, Services for synchronous calls, Actions for long-running goals"]}),"\n",(0,o.jsxs)(n.li,{children:[(0,o.jsx)(n.strong,{children:"Practical Implementation"}),": Building publisher/subscriber nodes, services, and bridges"]}),"\n",(0,o.jsxs)(n.li,{children:[(0,o.jsx)(n.strong,{children:"Robot Modeling"}),": Defining complex humanoid structures with URDF and Xacro"]}),"\n"]}),"\n",(0,o.jsxs)(n.p,{children:["Your humanoid robot now has a nervous system. What's next? In Module 2, we'll give it a ",(0,o.jsx)(n.strong,{children:"digital playground"}),"\u2014Gazebo and simulation environments where your robot can perceive, learn, and act in realistic physics-based worlds."]}),"\n",(0,o.jsx)(n.hr,{}),"\n",(0,o.jsx)(n.h2,{id:"quick-reference-common-ros-2-commands",children:"Quick Reference: Common ROS 2 Commands"}),"\n",(0,o.jsx)(n.pre,{children:(0,o.jsx)(n.code,{className:"language-bash",children:"# List nodes, topics, services\r\nros2 node list\r\nros2 topic list\r\nros2 service list\r\nros2 action list\r\n\r\n# Monitor data\r\nros2 topic echo /topic_name\r\nros2 topic pub /topic_name std_msgs/String \"data: 'hello'\"\r\n\r\n# Inspect types\r\nros2 interface show geometry_msgs/msg/Twist\r\nros2 interface show std_srvs/srv/Trigger\r\n\r\n# Debugging\r\nros2 run rqt_graph rqt_graph\r\nros2 run rqt_console rqt_console\r\n\r\n# Validate URDF\r\ncheck_urdf humanoid_12dof.urdf.xacro\r\nxacro humanoid_12dof.urdf.xacro > humanoid_12dof.urdf\n"})}),"\n",(0,o.jsx)(n.hr,{}),"\n",(0,o.jsx)(n.h2,{id:"further-reading--resources",children:"Further Reading & Resources"}),"\n",(0,o.jsxs)(n.ul,{children:["\n",(0,o.jsxs)(n.li,{children:[(0,o.jsx)(n.strong,{children:"ROS 2 Official Docs"}),": ",(0,o.jsx)(n.a,{href:"https://docs.ros.org/en/humble/",children:"https://docs.ros.org/en/humble/"})]}),"\n",(0,o.jsxs)(n.li,{children:[(0,o.jsx)(n.strong,{children:"ROS 2 Design"}),": ",(0,o.jsx)(n.a,{href:"https://design.ros2.org/",children:"https://design.ros2.org/"})]}),"\n",(0,o.jsxs)(n.li,{children:[(0,o.jsx)(n.strong,{children:"URDF/Xacro Tutorials"}),": ",(0,o.jsx)(n.a,{href:"https://wiki.ros.org/urdf/Tutorials",children:"https://wiki.ros.org/urdf/Tutorials"})]}),"\n",(0,o.jsxs)(n.li,{children:[(0,o.jsx)(n.strong,{children:"rclpy Documentation"}),": ",(0,o.jsx)(n.a,{href:"https://docs.ros.org/en/humble/p/rclpy/",children:"https://docs.ros.org/en/humble/p/rclpy/"})]}),"\n",(0,o.jsxs)(n.li,{children:[(0,o.jsx)(n.strong,{children:"DDS Specification"}),": ",(0,o.jsx)(n.a,{href:"https://www.omg.org/dds/",children:"https://www.omg.org/dds/"})]}),"\n"]})]})}function m(r={}){const{wrapper:n}={...(0,s.R)(),...r.components};return n?(0,o.jsx)(n,{...r,children:(0,o.jsx)(d,{...r})}):d(r)}},8453:(r,n,e)=>{e.d(n,{R:()=>a,x:()=>t});var i=e(6540);const o={},s=i.createContext(o);function a(r){const n=i.useContext(s);return i.useMemo(function(){return"function"==typeof r?r(n):{...n,...r}},[n,r])}function t(r){let n;return n=r.disableParentContext?"function"==typeof r.components?r.components(o):r.components||o:a(r.components),i.createElement(s.Provider,{value:n},r.children)}}}]);